!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r(2),jQuery(document).ready(function(){var e=!0;function t(e,t,r,a){for(var n=[],i=jQuery("#"+t+" .sites-container"),c=jQuery("#mwpal-wsal-child-sites"),o=0;o<r.length;o++)jQuery(r[o]).is(":checked")&&n.push(jQuery(r[o]).val());jQuery.ajax({type:"POST",url:scriptData.ajaxURL,async:!0,dataType:"json",data:{action:"update_active_wsal_sites",nonce:scriptData.scriptNonce,transferAction:a,activeSites:c.val(),requestSites:n.toString()},success:function(r){if(r.success&&n.length){for(var a=0;a<n.length;a++){var o=jQuery("<span></span>"),s=jQuery("<input />");s.attr("type","checkbox");var l=jQuery("<label></label>"),u=jQuery("#"+e+"-site-"+n[a]);s.attr("name",t+"[]"),s.attr("id",t+"-site-"+n[a]),s.attr("value",u.val()),l.attr("for",t+"-site-"+n[a]),l.html(u.parent().find("label").text()),o.append(s),o.append(l),i.append(o),u.parent().remove()}c.val(r.activeSites)}else console.log(r.message)},error:function(e,t,r){console.log(e.statusText),console.log(t),console.log(r)}})}if("activity-log"===scriptData.currentTab&&jQuery(".mwp-ssas").select2({width:250}),jQuery(".mwp-ssas").on("change",function(){var e=jQuery(this).val();jQuery("#mwpal-site-id").val(e),jQuery("#audit-log-viewer").submit()}),jQuery(".mwp-ipps").on("change",function(){var e=jQuery(this).val();jQuery(this).attr("disabled",!0),jQuery.post(scriptData.ajaxURL,{action:"set_per_page_events",count:e,nonce:scriptData.scriptNonce},function(){location.reload()})}),"settings"===scriptData.currentTab&&jQuery("#mainwp-tabs a:nth-child(2)").removeClass("nav-tab-active"),jQuery("#mwpal-wsal-sites-refresh").click(function(){var e=jQuery(this);e.attr("disabled",!0),e.val(scriptData.refreshing),jQuery.post(scriptData.ajaxURL,{action:"refresh_child_sites",nonce:scriptData.scriptNonce},function(){location.reload()})}),jQuery("#mwpal-wsal-manual-retrieve").click(function(){var e=jQuery(this);e.attr("disabled",!0),e.val(scriptData.retrieving),jQuery.post(scriptData.ajaxURL,{action:"retrieve_events_manually",nonce:scriptData.scriptNonce},function(){location.reload()})}),jQuery("#mwpal-wcs-add-btn").click(function(e){e.preventDefault(),t("mwpal-wcs","mwpal-wcs-al",jQuery("#mwpal-wcs input[type=checkbox]"),"add-sites")}),jQuery("#mwpal-wcs-remove-btn").click(function(e){e.preventDefault(),t("mwpal-wcs-al","mwpal-wcs",jQuery("#mwpal-wcs-al input[type=checkbox]"),"remove-sites")}),scriptData.infiniteScroll){var r=2;jQuery(window).scroll(function(){var t;jQuery(window).scrollTop()===jQuery(document).height()-jQuery(window).height()&&0!==r&&(t=r,jQuery("#mwpal-event-loader").show("fast"),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"mwpal_infinite_scroll_events",mwpal_viewer_security:scriptData.scriptNonce,page_number:t,page:scriptData.page,"mwpal-site-id":scriptData.siteId,orderby:scriptData.orderBy,order:scriptData.order},success:function(t){jQuery("#mwpal-event-loader").hide("1000"),t?(e=!0,jQuery("#audit-log-viewer #the-list").append(t)):(e=!1,jQuery("#mwpal-auditlog-end").show("fast"))},error:function(e,t,r){console.log(e.statusText),console.log(t),console.log(r)}}),r=e?t+1:0)})}jQuery("#mwpal-toggle-events-table>thead>tr>th>:checkbox").change(function(){jQuery(this).parents("table:first").find("tbody>tr>th>:checkbox").attr("checked",this.checked)}),jQuery("#mwpal-toggle-events-table>tbody>tr>th>:checkbox").change(function(){var e=0===jQuery(this).parents("tbody:first").find("th>:checkbox:not(:checked)").length;jQuery(this).parents("table:first").find("thead>tr>th:first>:checkbox:first").attr("checked",e)})})},,function(e,t){}]);